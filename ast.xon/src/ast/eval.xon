escapeIfString(s Any) = if s is String: `\`{s}\`` else s

ExpressionTree.eval(argsMap = {}) = select $:
  is LiteralExpressionTree: $literal.value
  is ParenthesizedExpressionTree: $value.eval(argsMap)
  is PipeExpressionTree: $right.eval({ $argument: $left.eval() })
  is in [InfixExpressionTree, PrefixExpressionTree, PostfixExpressionTree]:
    $.eval(argsMap)
  is IdExpressionTree:
    if $name in argsMap: argsMap[$name]
    else throw Error(`Undefined key: {$name}`)
  else: throw  Error('Unsupported operation')

InfixExpressionTree.eval(argsMap = {}): -- TODO
PrefixExpressionTree.eval(argsMap = {}): -- TODO
PostfixExpressionTree.eval(argsMap = {}): -- TODO
